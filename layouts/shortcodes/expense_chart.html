<canvas id="expenseChart{{ .Get 1 }}" width="400" height="200"></canvas>
<script>
document.addEventListener('DOMContentLoaded', function () {
    fetch('{{ .Get 0 }}')
        .then(response => response.text())
        .then(csv => {
            const labels = [];
            const values = [];
            const lines = csv.split('\n');
            lines.forEach(line => {
                const [category, value, month] = line.split(',');
                if (month.trim() === '{{ .Get 1 }}') {
                    labels.push(category.trim());
                    values.push(parseFloat(value.trim()));
                }
            });
            const ctx = document.getElementById('expenseChart{{ .Get 1 }}').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: [
                            '#FF6384',
                            '#36A2EB',
                            '#FFCE56',
                            '#4BC0C0',
                            '#9966FF',
                            '#FF9F40'
                        ]
                    }]
                },
                options: {
                    responsive: true
                }
            });
        });
});
</script>
